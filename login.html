<!DOCTYPE HTML>
<!--
	Spatial by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<!-- This is the login page for end users -->
<!-- They login here, can choose to reset their password, be redirected to register as a new user, and login through Social Media -->
<html>
	<head>
		<title>Spatial by TEMPLATED</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="landing">

		<!-- Header -->
			<header id="header" class="alt">
				<h1><strong><a href="index.html">Spatial</a></strong> by Templated</h1>
				<nav id="nav">
					<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="generic.html">Generic</a></li>
						<li><a href="elements.html">Elements</a></li>
					</ul>
				</nav>
			</header>

			<a href="#menu" class="navPanelToggle"><span class="fa fa-bars"></span></a>

		<!-- Login Form -->
			<section id="banner">
				<h2>Spatial</h2>
				<p>Lorem ipsum dolor sit amet nullam consequat <br /> interdum vivamus donce sed libero.</p>
				<!-- <ul class="actions">
					<form name="loginform" id="loginform" action="#" method="post">
              <p class="login-username">
								<label for="user_login">Username</label>
                <input type="text" name="log" id="user_login" class="input" value="" size="20" />
              </p>
              <p class="login-password">
                <label for="user_pass">Password</label>
                <input type="password" name="pwd" id="user_pass" class="input" value="" size="20" />
			</p> -->
			</section>
			<!-- Hidden Divs for URLs -->
			<div class="mfn-login" style="display: none;">
				<input type="text" class="form-control" name="validatePasswordUrl" id="validatePasswordUrl" readonly />
			</div>
		  	<!-- <div class="mfn-login" style="display: none;">
			  <input type="text" class="form-control" name="registration.external" id="registerUserUrl" readonly />
		  	</div> -->
		  	<div class="mfn-login" style="display: none;">
				<input type="text" class="form-control" name="forgotPasswordURL" id="forgotPasswordURL" readonly />
		  	</div>
		  	<div class="mfn-login" style="display: none;">
			  	<input type="text" class="form-control" name="socialLoginUrl" id="socialLoginUrl" readonly />
		  	</div>
			<!-- end hidden divs -->
			<section id = "loginDiv" class = "wrapper">
				<div class="container">
					<form method="post" action="#">
						<div class="row uniform 50%">
							<div class="6u 12u$(xsmall)">
								<input type="text" name="user_login" id="user_login" value="" placeholder="Username" />
							</div>
							<div class="6u$ 12u$(xsmall)">
								<input type="password" name="user_pass" id="user_pass" value="" placeholder="Password" />
							</div>
						</div>
					</form>
				</div>
			<br/>
			<div id = loginDiv class="row center" style="margin:auto">
			<p class="login-submit">
				<div class = "12u center" style="margin:auto">
					<a class="button button_theme" onclick="validatePassword();">LogIn</a>
					<input type="hidden" name="redirect_to" value="#" />
						<a class="button button_theme" onclick="resetPassword();">Touble logging in?</a>
					<input type="hidden" name="redirect_to" value="#" />
						<a class="button button_theme" onclick="redirect_toReg();">Register</a>
					<input type="hidden" name="redirect_to" value="#" />
						<a class="button button_theme" onclick="redirect_toSocial();">Logon With Google</a>
				</div>
			</p>
			</div>
		</section>
		<section id = "pwResetCodeDiv" class= "wrapper">
			<div class="container"></div>
					<form method="post" action="#">
						<div class="row uniform 50%">
							<div class="6u 12u$(xsmall)">
								<input type="text" name="pwReset_Code" id="pwReset_Code" value="" placeholder="One Time Passcode" />
							</div>
							<div class="6u$ 12u$(xsmall)">
								<input type="password" name="new_password" id="new_password" value="" placeholder="Password" />
							</div>
						</div>
					</form>
				</div>
			<br/>
				<div id = loginDiv>
				<p class="login-submit">
					<a class="button button_theme" onclick="validatePWResetCode();">Set Password</a>
						<input type="hidden" name="redirect_to" value="#" />
					</p>
				</div>
		</section>

		<section>
			<div class="mfn-login" style="display: none;">
				<input type="text" class="form-control" name="ppURL" id="ppURL" readonly />
			</div>
			<div id="ppDiv" class = "container">
				<h4 id="prompt"> </h4>
				<div class="6u$ 12u$(xsmall)">
					<label id =label1 style="display:inline-block;"></label>
					<input type="text" name="label1" id="label1" value="" />
					<div class="mfn-login" style="display: none;">
						<input type="text" class="form-control" name="label1ID" id="label1ID" readonly />
					</div>
				</div>
				<div class="6u$ 12u$(xsmall)">
					<label id =label2 style="display:inline-block;"></label>
					<input type="text" name="label2" id="label2" value="" />
					<div class="mfn-login" style="display: none;">
						<input type="text" class="form-control" name="label2ID" id="label2ID" readonly />
					</div>
				</div>
				<ul class="actions">
					<li><a href="#" class="button" onclick="setPPValues();">Continue</a></li> 
				</ul>
			</div>

		</section> 

			<!-- One -->
				<section id="one" class="wrapper style1">
					<div class="container 75%">
						<div class="row 200%">
							<div class="6u 12u$(medium)">
								<header class="major">
									<h2>Maecenas luctus lectus</h2>
									<p>Perspiciatis doloremque recusandae dolor</p>
								</header>
							</div>
							<div class="6u$ 12u$(medium)">
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Non ea mollitia corporis id, distinctio sunt veritatis officiis dolore reprehenderit deleniti voluptatibus harum magna, doloremque alias quisquam minus, eaque. Feugiat quod, nesciunt! Iste quos ipsam, iusto sit esse.</p>
								<p>Dolorum aspernatur maxime libero ratione quidem distinctio, placeat fugiat laborum voluptatum enim neque soluta vel sunt id ex veritatis. Labore rerum, odit sapiente, alias mollitia magnam exercitationem modi amet earum quia atque ipsum voluptas asperiores quas laboriosam.</p>
							</div>
						</div>
					</div>
				</section>

			<!-- Two -->
				<section id="two" class="wrapper style2 special">
					<div class="container">
						<header class="major">
							<h2>Fusce ultrices fringilla</h2>
							<p>Maecenas vitae tellus feugiat eleifend</p>
						</header>
						<div class="row 150%">
							<div class="6u 12u$(xsmall)">
								<div class="image fit captioned">
									<img src="images/pic02.jpg" alt="" />
									<h3>Lorem ipsum dolor sit amet.</h3>
								</div>
							</div>
							<div class="6u$ 12u$(xsmall)">
								<div class="image fit captioned">
									<img src="images/pic03.jpg" alt="" />
									<h3>Illum, maiores tempora cupid?</h3>
								</div>
							</div>
						</div>
						<ul class="actions">
							<li><a href="#" class="button special big">Nulla luctus</a></li>
							<li><a href="#" class="button big">Sed vulputate</a></li>
						</ul>
					</div>
				</section>

			<!-- Three -->
				<section id="three" class="wrapper style1">
					<div class="container">
						<header class="major special">
							<h2>Mauris vulputate dolor</h2>
							<p>Feugiat sed lorem ipsum magna</p>
						</header>
						<div class="feature-grid">
							<div class="feature">
								<div class="image rounded"><img src="images/pic04.jpg" alt="" /></div>
								<div class="content">
									<header>
										<h4>Lorem ipsum</h4>
										<p>Lorem ipsum dolor sit</p>
									</header>
									<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Labore esse tenetur accusantium porro omnis, unde mollitia totam sit nesciunt consectetur.</p>
								</div>
							</div>
							<div class="feature">
								<div class="image rounded"><img src="images/pic05.jpg" alt="" /></div>
								<div class="content">
									<header>
										<h4>Recusandae nemo</h4>
										<p>Ratione maiores a, commodi</p>
									</header>
									<p>Animi mollitia optio culpa expedita. Dolorem alias minima culpa repellat. Dolores, fuga maiores ut obcaecati blanditiis, at aperiam doloremque.</p>
								</div>
							</div>
							<div class="feature">
								<div class="image rounded"><img src="images/pic06.jpg" alt="" /></div>
								<div class="content">
									<header>
										<h4>Laudantium fugit</h4>
										<p>Possimus ex reprehenderit eaque</p>
									</header>
									<p>Maiores iusto inventore fugit architecto est iste expedita commodi sed, quasi feugiat nam neque mollitia vitae omnis, ea natus facere.</p>
								</div>
							</div>
							<div class="feature">
								<div class="image rounded"><img src="images/pic07.jpg" alt="" /></div>
								<div class="content">
									<header>
										<h4>Porro aliquam</h4>
										<p>Quaerat, excepturi eveniet laboriosam</p>
									</header>
									<p>Vitae earum unde, autem labore voluptas ex, iste dolorum inventore natus consequatur iure similique obcaecati aut corporis hic in! Porro sed.</p>
								</div>
							</div>
						</div>
					</div>
				</section>

			<!-- Four -->
				<section id="four" class="wrapper style3 special">
					<div class="container">
						<header class="major">
							<h2>Aenean elementum ligula</h2>
							<p>Feugiat sed lorem ipsum magna</p>
						</header>
						<ul class="actions">
							<li><a href="#" class="button special big">Get in touch</a></li>
						</ul>
					</div>
				</section>

		<!-- Footer -->
			<footer id="footer">
				<div class="container">
					<ul class="icons">
						<li><a href="#" class="icon fa-facebook"></a></li>
						<li><a href="#" class="icon fa-twitter"></a></li>
						<li><a href="#" class="icon fa-instagram"></a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; Untitled</li>
						<li>Design: <a href="http://templated.co">TEMPLATED</a></li>
						<li>Images: <a href="http://unsplash.com">Unsplash</a></li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/p1helper.js"></script>
			<script src="assets/js/p1Logon.js"></script>
			<script src="assets/js/p1.js"></script>
			
			
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
			


			<script>
// some housekeeping variables

				$('#changePassword').on('input', function (e) {
				let thisPassword = $('#changePassword').val();

				if (regexLower.test(thisPassword)) {
				$('#lowercase').removeClass('text-primary');
				} else {
					$('#lowercase').addClass('text-primary');
				}
				if (regexUpper.test(thisPassword)) {
					$('#uppercase').removeClass('text-primary');
				} else {
					$('#uppercase').addClass('text-primary');
				}

				if (regexNumeric.test(thisPassword)) {
					$('#numeric').removeClass('text-primary');
				} else {
					$('#numeric').addClass('text-primary');
				}

				if (regexSpecial.test(thisPassword)) {
					$('#special').removeClass('text-primary');
				} else {
					$('#special').addClass('text-primary');
				}

				if (regexLength.test(thisPassword)) {
					$('#length').removeClass('text-primary');
				} else {
					$('#length').addClass('text-primary');
				}
			});
			// begin process
			$(document).ready(function () {
				console.log("Page ready function");

				// do I already have a session cookie?

			// 	if (Cookies.get('accessToken') && Cookies.get('idToken')) {
			// 		// yes, user already has a session

			// 		console.log('id_token (' + Cookies.get('idToken') + ')');
			// 		console.log('accessToken (' + Cookies.get('accessToken') + ')');


			// 	} else {
			// 			initiateLogon();
			// 		}

			// })


			if (Cookies.get('accessToken') && Cookies.get('idToken')) {
            // yes, user already has a session
            console.log('id_token (' + Cookies.get('idToken') + ')');
			console.log('accessToken (' + Cookies.get('accessToken') + ')');
			window.location.replace('https://morgapp.ping-eng.com/p1ui/index.html');


          } else {

              // missing accessToken or idToken for this individual

              console.log('No existing user session or token found');
			  // was the user just sent here from p14c?
			  getUrlParameter();
              console.log("flowid value: "+flowId);
              if (flowId) {

                // url has a flowId - so they just arrived from p14c

                console.log('flowId found in url: ' + flowId);
                console.log('User already bootstrapped through p14c');
				console.log('Performing p14c ajax query to determine next step');
				getNextStep(flowId);

              } else {

                // url does not have a flowId.  and we don't have a session.  send them authorizationUrl
                console.log('No flowId found in url');
                console.log('Redirecting to p14c to bootstrap session');
                window.location.replace(authorizationUrl);

              }

			}
		})
	</script>

	</body>
</html>
